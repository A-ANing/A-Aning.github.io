<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<meta name="format-detection" content="telephone=no">
		<meta name="keywords" content="" />
		<title>乐之城艺术</title>
		<link rel="stylesheet" type="text/css" href="css/trainer.css" />
	</head>

	<body>
		<!--头部开始-->
		<section class="trainer">
			<div class="container">
				<div class="titleimg">
					<img src="img/20181029181347_03.png"/>
				</div>
				<div class="bodys">
					<div class="box1 box">
						<ul>
							<li>表现太棒了!!!</li>
							<li>
								<div class="mark">
									<span class="mark-number">98</span><span>分</span>
								</div>
							</li>
						</ul>
					</div>
					<div class="time">
						<div class="atime">
							12月30日（周五）
						</div>
						<div class="btime">20:00-20:45</div>
					</div>
					<div class="box2 box">
						<div class="boxs">
							<div class="box-title"><span>○</span>老师点评<span>○</span></div>
						</div>
						<ul>
							<li>
								<div class="head-box">
									<div class="head">
										<img src="img/03.png" >
									</div>
									<div class="teach-name">
										王欣老师
									</div>
								</div>
							</li>
							<li>
								<div class="text">
									小朋友今天的整体练习表现都很不错，有一些音的错误要专门的攻克一下，情感表达再细腻一点就更好了。
								</div>
							</li>
							<li>
								<div class="audio">
									
  <audio preload="metadata"id="audio1">
	 <source src="audio/刘明-单车.mp3" type="audio/mp3">
  </audio>
  
<div class="footer">
	<div class="progress-wrapper">
		<span class="progress-time progress-time-l">00:00</span>
		<div class="mmProgress">
			<div class="mmProgress-bar"></div>
			<div class="mmProgress-outer"></div>
			<div class="mmProgress-inner">
				<div class="mmProgress-dot"></div>
			</div>
		</div>
		<span class="progress-time progress-time-r">00:00</span>
		<div class="play" id="player">
			
		</div>
	</div>
</div>

								</div>
							</li>
						</ul>
					</div>
					
					<div class="box3 box">
						<div class="boxs">
							<div class="box-title"><span>○</span>老师点评<span>○</span></div>
						</div>
						<ul>
							<li class="pj1">
								
									<div><span>上课表现</span></div> 
									<div><span><img src="img/20181029181347_11.png" ></span><span>很棒</span></div> 
								
							</li>
							<li class="pj1">
								
									<div><span>专注力</span></div> 
									<div><span><img src="img/20181029181347_11.png" ></span><span>不错</span></div> 
								
							</li>
							<li class="pj1">
								
									<div><span>音符准确度</span></div> 
									<div><span><img src="img/20181029181347_11.png" ></span><span>一般</span></div> 
								
							</li>
							<li class="pj1">
								
									<div><span>连贯性</span></div> 
									<div><span><img src="img/20181029181347_11.png" ></span><span>继续努力</span></div> 
								
							</li>
						</ul>
					</div>
					<div class="box4 box">
						<div class="boxs">
							<div class="box-title"><span>○</span>老师点评<span>○</span></div>
						</div>
						
					</div>
					
				</div>
			</div>
		</section>
<script type="text/javascript">
	window.onload=function(){
		var players=document.getElementById('player')
		var audio1 =document.getElementById('audio1')
		console.log(audio1)
		var boxlenth=document.querySelector('.mmProgress').offsetWidth
		alert(boxlenth)
		var lengths =document.querySelector('.mmProgress-inner')
		var timel=document.querySelector('.progress-time-l')
		var timer1
		var timer2
		
		 var open=true

									 players.onclick=function onchange(){
										 
										 function jindutiao(){
										 	
										 							//获取当前歌曲的歌长
										 							
																	var lenth=audio1.duration;
										 							alert(lenth)
										 							timer1=setInterval(function(){
										 								var  cur=audio1.currentTime;//获取当前的播放时间
										 								// alert(cur)
										 								lengths.style.width=parseFloat(boxlenth/lenth)*cur+"px";
										 							},50)
										 		// 					audio.ended=function(){
										 		// 						
										 		// 						alert('2')
										 		// 					}
												
												
// 										 							audio1.addEventListener('ended', function () {  
// 										 								clearInterval(timer1);
// 										 			alert('over');

// 										 		}, false);
												console.log(audio1.ended)
										 				}
				function addtime(){
                    timer2=setInterval(function(){
                       var  cur=parseInt(audio1.currentTime);//秒数
                        var temp=cur;
                        minute=parseInt(temp/60);
                        if(cur%60<10){
                            timel.innerHTML=""+minute+":0"+cur%60+"";
                        }else{
                            timel.innerHTML=""+minute+":"+cur%60+"";
                        }
                    },1000);
                }
// 				audio1.ontimeupdate = function() {myFunction()};
// 
// function myFunction() 
// {
//     // 显示 id="demo" 的 p 元素中视频的播放位置 
//     console.log(audio1.currentTime)
// }
			if(open==true){
				addtime()
			audio1.play()
			jindutiao()
			open=false
			return open
			}else if(open==false){
				audio1.pause();
				open=true
				return open
			}
		}}
// 	window.onload=function(){
// 		players.onclick=onchange
// 	}
</script>
	</body>

</html>
